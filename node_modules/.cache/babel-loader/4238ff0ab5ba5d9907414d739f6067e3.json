{"ast":null,"code":"var _jsxFileName = \"/Users/johnyoo/Desktop/MyProjects/slackone/src/components/messages/ChatFeature.js\";\nimport React from 'react';\nimport { ChatManager, TokenProvider } from '@pusher/chatkit-client';\nimport MessageList from './MessageList';\nimport Input from './Input';\n\nclass ChatFeature extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentUser: null,\n      currentRoom: {\n        users: []\n      },\n      messages: [],\n      users: []\n    };\n    this.addMessage = this.addMessage.bind(this);\n  }\n\n  componentDidMount() {\n    const id = this.props.params.id.id;\n    const chatManager = new ChatManager({\n      instanceLocator: \"v1:us1:c5c0560a-fa96-4f39-9fc2-7e451e9bb2cf\",\n      userId: id,\n      tokenProvider: new TokenProvider({\n        url: \"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/c5c0560a-fa96-4f39-9fc2-7e451e9bb2cf/token\"\n      })\n    });\n    chatManager.connect().then(currentUser => {\n      this.setState({\n        currentUser: currentUser\n      });\n      return currentUser.subscribeToRoom({\n        roomId: \"aa1b71eb-7b3e-45e7-a719-e6a267a9b729\",\n        messageLimit: 100,\n        hooks: {\n          onMessage: message => {\n            this.setState({\n              messages: [...this.state.messages, message]\n            });\n          }\n        }\n      });\n    }).then(currentRoom => {\n      this.setState({\n        currentRoom,\n        users: currentRoom.userIds\n      });\n    }).catch(error => console.log(error));\n  }\n\n  addMessage(text) {\n    this.state.currentUser.sendMessage({\n      text,\n      roomId: this.state.currentRoom.id\n    }).catch(error => console.error('error', error));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"Hi There!\"), React.createElement(MessageList, {\n      messages: this.state.messages,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), React.createElement(Input, {\n      className: \"ui input\",\n      onSubmit: this.addMessage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default ChatFeature;","map":{"version":3,"sources":["/Users/johnyoo/Desktop/MyProjects/slackone/src/components/messages/ChatFeature.js"],"names":["React","ChatManager","TokenProvider","MessageList","Input","ChatFeature","Component","constructor","props","state","currentUser","currentRoom","users","messages","addMessage","bind","componentDidMount","id","params","chatManager","instanceLocator","userId","tokenProvider","url","connect","then","setState","subscribeToRoom","roomId","messageLimit","hooks","onMessage","message","userIds","catch","error","console","log","text","sendMessage","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,EAAsBC,aAAtB,QAA2C,wBAA3C;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,KAAP,MAAkB,SAAlB;;AAEA,MAAMC,WAAN,SAA0BL,KAAK,CAACM,SAAhC,CAA0C;AACzCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACHC,MAAAA,WAAW,EAAE,IADV;AAEHC,MAAAA,WAAW,EAAE;AAACC,QAAAA,KAAK,EAAC;AAAP,OAFV;AAGHC,MAAAA,QAAQ,EAAE,EAHP;AAIHD,MAAAA,KAAK,EAAE;AAJJ,KAAb;AAMM,SAAKE,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACN;;AAEDC,EAAAA,iBAAiB,GAAG;AAAA,UACXC,EADW,GACJ,KAAKT,KAAL,CAAWU,MAAX,CAAkBD,EADd,CACXA,EADW;AAGnB,UAAME,WAAW,GAAG,IAAIlB,WAAJ,CAAgB;AAC1BmB,MAAAA,eAAe,EAAE,6CADS;AAE1BC,MAAAA,MAAM,EAAEJ,EAFkB;AAG1BK,MAAAA,aAAa,EAAE,IAAIpB,aAAJ,CAAkB;AAC7BqB,QAAAA,GAAG,EAAE;AADwB,OAAlB;AAHW,KAAhB,CAApB;AAQMJ,IAAAA,WAAW,CAACK,OAAZ,GACCC,IADD,CACMf,WAAW,IAAI;AACjB,WAAKgB,QAAL,CAAc;AAAEhB,QAAAA,WAAW,EAAEA;AAAf,OAAd;AACA,aAAOA,WAAW,CAACiB,eAAZ,CAA4B;AAC/BC,QAAAA,MAAM,EAAE,sCADuB;AAE/BC,QAAAA,YAAY,EAAE,GAFiB;AAG/BC,QAAAA,KAAK,EAAE;AACHC,UAAAA,SAAS,EAAEC,OAAO,IAAI;AAClB,iBAAKN,QAAL,CAAc;AACVb,cAAAA,QAAQ,EAAE,CAAC,GAAG,KAAKJ,KAAL,CAAWI,QAAf,EAAyBmB,OAAzB;AADA,aAAd;AAGH;AALE;AAHwB,OAA5B,CAAP;AAWH,KAdD,EAgBCP,IAhBD,CAgBMd,WAAW,IAAI;AACjB,WAAKe,QAAL,CAAc;AACVf,QAAAA,WADU;AAEVC,QAAAA,KAAK,EAAED,WAAW,CAACsB;AAFT,OAAd;AAIH,KArBD,EAsBCC,KAtBD,CAsBOC,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAtBhB;AAuBN;;AAEDrB,EAAAA,UAAU,CAACwB,IAAD,EAAO;AACV,SAAK7B,KAAL,CAAWC,WAAX,CAAuB6B,WAAvB,CAAmC;AAC/BD,MAAAA,IAD+B;AAE/BV,MAAAA,MAAM,EAAE,KAAKnB,KAAL,CAAWE,WAAX,CAAuBM;AAFA,KAAnC,EAICiB,KAJD,CAIOC,KAAK,IAAIC,OAAO,CAACD,KAAR,CAAc,OAAd,EAAuBA,KAAvB,CAJhB;AAKH;;AAEJK,EAAAA,MAAM,GAAG;AACR,WACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAI,MAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADD,EAEE,oBAAC,WAAD;AAAa,MAAA,QAAQ,EAAE,KAAK/B,KAAL,CAAWI,QAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGE,oBAAC,KAAD;AAAO,MAAA,SAAS,EAAC,UAAjB;AAA4B,MAAA,QAAQ,EAAE,KAAKC,UAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,CADD;AAOA;;AAhEwC;;AAoE1C,eAAeT,WAAf","sourcesContent":["import React from 'react';\nimport { ChatManager, TokenProvider } from '@pusher/chatkit-client';\nimport MessageList from './MessageList';\nimport Input from './Input';\n\nclass ChatFeature extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n            currentUser: null,\n            currentRoom: {users:[]},\n            messages: [],\n            users: []\n        }\n        this.addMessage = this.addMessage.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { id } = this.props.params.id;\n\n\t\tconst chatManager = new ChatManager({\n            instanceLocator: \"v1:us1:c5c0560a-fa96-4f39-9fc2-7e451e9bb2cf\",\n            userId: id,\n            tokenProvider: new TokenProvider({\n                url: \"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/c5c0560a-fa96-4f39-9fc2-7e451e9bb2cf/token\"\n            })\n        })\n\n        chatManager.connect()\n        .then(currentUser => {\n            this.setState({ currentUser: currentUser })\n            return currentUser.subscribeToRoom({\n                roomId: \"aa1b71eb-7b3e-45e7-a719-e6a267a9b729\",\n                messageLimit: 100,\n                hooks: {\n                    onMessage: message => {\n                        this.setState({\n                            messages: [...this.state.messages, message],\n                        })\n                    },\n                 }\n            })\n        })\n\n        .then(currentRoom => {\n            this.setState({\n                currentRoom,\n                users: currentRoom.userIds\n            })\n        })\n        .catch(error => console.log(error))\n\t}\n\n\taddMessage(text) {\n        this.state.currentUser.sendMessage({\n            text,\n            roomId: this.state.currentRoom.id\n        })\n        .catch(error => console.error('error', error));\n    }\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<h2 className=\"header\">Hi There!</h2>\n\t\t\t\t <MessageList messages={this.state.messages} />\n\t\t\t\t <Input className=\"ui input\" onSubmit={this.addMessage} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\nexport default ChatFeature;"]},"metadata":{},"sourceType":"module"}